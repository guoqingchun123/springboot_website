<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>赤峰市房产信息网</title>
    <link rel="icon" type="image/x-icon" th:href="@{/favicon.ico}">
    <link th:href="@{/layui/css/layui.css}" rel="stylesheet" type="text/css">
    <style>
        body {
            background-color: #F2F2F2;
            overflow: hidden;
        }
        .logo {
            height: 80px;
            background: #ffffff url([[@{/themes/images/console-logo.png}]]) no-repeat center center;
        }
        .header {
            height: 150px;
            margin: 15px;
            background-color: #ffffff;
        }
        .header .container {
            margin: 16px;
            height: 108px;
            border-radius: 8px;
            color: #ffffff;
            font-size: 16px;
            background-repeat: no-repeat;
            background-position: 80% bottom;
        }
        .header .container.count-region {
            background-color: #4fadef;
            background-image:  url([[@{/themes/images/console-region.png}]]);
        }
        .header .container.count-area {
            background-color: #f1696b;
            background-image:  url([[@{/themes/images/console-area.png}]]);
        }
        .header .container.count-trade-yesterday {
            background-color: #3bcfcd;
            background-image:  url([[@{/themes/images/console-trade.png}]]);
        }
        .header .container.count-trade-today {
            background-color: #f48827;
            background-image:  url([[@{/themes/images/console-trade.png}]]);
        }

        .header .container .detail {
            padding-top: 25px;
            padding-left: 40px;
        }
        .header .container .detail .title {
            margin-bottom: 5px;
        }
        .header .container .detail .data {
            font-size: 36px;
        }

        .content .container {
            border-radius: 8px;
            background-color: #ffffff;
            margin: 0 16px 16px;
        }
        .content .layui-col-md4 {
            height: 100%;
        }
        .content .chart-map {
            height: 100%;
            margin: 0;
        }
        .content .chart-sale, .content .chart-price, .content .list-trade, .content .chart-stock {
            height: 50%;
        }
        .content .list-trade {
            overflow: hidden;
        }
        .list-trade h3 {
            font-size: 18px;
            color: #333333;
            padding: 5px 5px 0px 5px;;
            /*border-bottom: 1px solid #e1e1e1;*/
        }
        .layui-table thead tr {
            background-color: #eceff2;
            color: #333333;
        }
    </style>
</head>
<body>
<div th:replace="common :: ready"></div>
<script th:inline="javascript">
    function initLayout() {
        document.getElementById('content').style.height = (window.innerHeight - 260) + 'px';
        document.getElementById('content-left').style.height = (window.innerHeight - 276) + 'px';
        document.getElementById('content-right').style.height = (window.innerHeight - 276) + 'px';
    }
    document.ready(function () {
        initLayout();
    });
</script>
<div class="logo"></div>
<div class="header layui-row layui-col-space10">
    <div class="layui-col-md3">
        <div class="container count-region">
            <div class="detail">
                <div class="title">小区数</div>
                <div><span class="data" th:text="${data.regionNum}?: '0'"></span>个</div>
            </div>
        </div>
    </div>
    <div class="layui-col-md3">
        <div class="container count-area">
            <div class="detail">
                <div class="title">存量面积</div>
                <div><span class="data" th:text="${data.stockArea}?: '0'"></span>㎡</div>
            </div>
        </div>
    </div>
    <div class="layui-col-md3">
        <div class="container count-trade-yesterday">
            <div class="detail">
                <div class="title">昨日交易量</div>
                <div><span class="data" th:text="*{data.yesterdayTradingArea}?: '0'"></span>套</div>
            </div>
        </div>
    </div>
    <div class="layui-col-md3">
        <div class="container count-trade-today">
            <div class="detail">
                <div class="title">今日交易量</div>
                <div><span class="data" th:text="*{data.todayTradingArea}?: '0'"></span>套</div>
            </div>
        </div>
    </div>
</div>
<div id="content" class="content layui-row layui-col-space10">
    <div id="content-left" class="layui-col-md4">
        <div id="content-sale" class="container chart-sale"></div>
        <div id="content-price" class="container chart-price"></div>
    </div>
    <div class="layui-col-md4">
        <div id="content-map" class="container chart-map">地图</div>
    </div>
    <div id="content-right" class="layui-col-md4">
        <div class="container list-trade">
            <h3>今日交易流水</h3>
            <table id="list-trade-data"></table>
        </div>
        <div id="content-stock" class="container chart-stock"></div>
    </div>
</div>
<script th:src="@{/layui/layui.js}"></script>
<script th:src="@{/layui/echarts/echarts.js}"></script>
<script th:src="@{/layui/echarts/macarons.js}"></script>
<script th:inline="javascript">
    var ctxPath = /*[[@{/}]]*/'';
    layui.use(['layer', 'table'], function () {
        var $ = layui.jquery;

        // 供给和销售情况
        var saleChart = echarts.init(document.getElementById('content-sale'), 'macarons');
        saleChart.setOption({
            title: {
                text: '商品房供给和销售情况示意图',
                textStyle: {
                    fontSize: '18',
                    color: '#333333'
                }
            },
            tooltip : {
                trigger: 'axis'
            },
            legend: {
                y: 'bottom',
                data: ['商品房(供给)', '商品房(销售)', '商品房住宅(供给)', '商品房住宅(销售)']
            },
            xAxis: [
                {
                    type : 'category',
                    boundaryGap: false,
                    data: ['2018年1季度', '2018年2季度', '2018年3季度', '2018年4季度', '2019年1季度'],
                    axisLabel: {
                        textStyle: {
                            color: '#333333'
                        }
                    }
                }
            ],
            yAxis: [
                {
                    type : 'value',
                    axisLabel: {
                        textStyle: {
                            color: '#333333'
                        }
                    }
                }
            ],
            series: [
                {
                    name: '商品房(供给)',
                    type: 'line',
                    data: [36.95, 46.81, 79.06, 55.11, 45.46]
                    /*itemStyle : {
                        normal: {
                            label: {
                                show: true,
                                position: 'top'
                            }
                        }
                    }*/
                }, {
                    name: '商品房(销售)',
                    type: 'line',
                    data: [50.06, 57.15, 163.73, 65.93, 29.26]
                }
            ]
        });

        // 销售均价
        var priceChart = echarts.init(document.getElementById('content-price'), 'macarons');
        priceChart.setOption({
            title: {
                text: '商品房销售均价示意图',
                textStyle: {
                    fontSize: '18',
                    color: '#333333'
                }
            },
            tooltip : {
                trigger: 'axis'
            },
            legend: {
                y: 'bottom',
                data: ['全市商品房', '全市商品房住宅', '中心城区商品房', '中心城区商品房住宅']
            },
            xAxis: [
                {
                    type : 'category',
                    boundaryGap: false,
                    data: ['2018年3月底', '2018年6月底', '2018年9月底', '2018年12月底', '2019年3月底'],
                    axisLabel: {
                        textStyle: {
                            color: '#333333'
                        }
                    }
                }
            ],
            yAxis: [
                {
                    type : 'value',
                    axisLabel: {
                        textStyle: {
                            color: '#333333'
                        }
                    }
                }
            ],
            series: [
                {
                    name: '全市商品房',
                    type: 'line',
                    data: [4706, 5271, 5478, 5170, 5222.4]
                }, {
                    name: '全市商品房住宅',
                    type: 'line',
                    data: [4707, 4847, 5511, 5099, 5180.9]
                }
            ]
        });

        // 库存
        var stockChart = echarts.init(document.getElementById('content-stock'), 'macarons');
        stockChart.setOption({
            title: {
                text: '商品房库存情况示意图',
                textStyle: {
                    fontSize: '18',
                    color: '#333333'
                }
            },
            tooltip : {
                trigger: 'axis'
            },
            legend: {
                y: 'bottom',
                data: ['商品房', '住宅', '非住宅']
            },
            xAxis: [
                {
                    type : 'category',
                    // boundaryGap: false,
                    data: ['2014年', '2015年', '2016年', '2017年', '2018年', '截止目前'],
                    axisLabel: {
                        textStyle: {
                            color: '#333333'
                        }
                    }
                }
            ],
            yAxis: [
                {
                    type : 'value',
                    axisLabel: {
                        textStyle: {
                            color: '#333333'
                        }
                    }
                }
            ],
            series: [
                {
                    name: '商品房',
                    type: 'bar',
                    data: [483.7, 482.7, 531.6, 535.6, 507.7, 581.4]
                }, {
                    name: '住宅',
                    type: 'bar',
                    data: [257, 182, 213, 217.4, 212.2, 231.4]
                }, {
                    name: '非住宅',
                    type: 'bar',
                    data: [226.7, 300.7, 318.6, 318.2, 295.6, 350]
                }
            ]
        });

        //// 地图
        var mapChart = echarts.init(document.getElementById('content-map'), 'macarons');
        mapChart.showLoading();

        $.get(ctxPath + '150400.json', function (geoJson) {
            mapChart.hideLoading();
            echarts.registerMap('maps', geoJson);

            mapChart.setOption(option = {
                title: {
                    text: '房源热度地图',
                    textStyle: {
                        fontSize: '18',
                        color: '#333333'
                    }
                },
                tooltip: {
                    trigger: 'item',
                    formatter: '{b}<br/>{c} (套)'
                },
                visualMap: {
                    min: 0,
                    max: 50000,
                    text: ['High', 'Low'],
                    realtime: false,
                    calculable: true,
                    inRange: {
                        color: ['lightskyblue', 'yellow', 'orangered']
                    }
                },
                series: [
                    {
                        name: '房源热度地图',
                        type: 'map',
                        mapType: 'maps',
                        itemStyle: {
                            normal: {label: {show: true}},
                            emphasis: {label: {show: true}}
                        },
                        data: [
                            {name: '松山区', value: 20057.34},
                            {name: '红山区', value: 15477.48},
                            {name: '元宝山区', value: 0}
                        ]
                    }
                ]
            });
        });

        //// 交易流水
        layui.table.render({
            elem: '#list-trade-data',
            skin: 'line',
            cols: [
                [
                    {
                        field: 'projectName',
                        title: '项目名称'
                    }, {
                        field: 'houseAddr',
                        title: '房屋坐落'
                    }, {
                        field: 'houseType',
                        title: '房屋类型',
                        width: 100
                    }
                ]
            ],
            data: [
                {
                    projectName: '悦府和园',
                    houseAddr: '新城区八家组团经棚路西、燕山街南悦府和园小区',
                    houseType: '住宅'
                }, {
                    projectName: '悦府和园',
                    houseAddr: '新城区八家组团经棚路西、燕山街南悦府和园小区',
                    houseType: '住宅'
                }, {
                    projectName: '悦府和园',
                    houseAddr: '新城区八家组团经棚路西、燕山街南悦府和园小区',
                    houseType: '住宅'
                }, {
                    projectName: '悦府和园',
                    houseAddr: '新城区八家组团经棚路西、燕山街南悦府和园小区',
                    houseType: '住宅'
                }, {
                    projectName: '悦府和园',
                    houseAddr: '新城区八家组团经棚路西、燕山街南悦府和园小区',
                    houseType: '住宅'
                }, {
                    projectName: '悦府和园',
                    houseAddr: '新城区八家组团经棚路西、燕山街南悦府和园小区',
                    houseType: '住宅'
                }, {
                    projectName: '悦府和园',
                    houseAddr: '新城区八家组团经棚路西、燕山街南悦府和园小区',
                    houseType: '住宅'
                }
            ]
        });

        $(window).resize(function () {
            initLayout();

            saleChart.resize();
            priceChart.resize();
            stockChart.resize();

            mapChart.resize();
        });
    });
</script>
</body>