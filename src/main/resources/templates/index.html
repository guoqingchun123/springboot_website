<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>赤峰市房产信息网</title>
	<link rel="icon" type="image/x-icon" th:href="@{/favicon.ico}"/>
	<link th:href="@{/layui/css/layui.css}" rel="stylesheet" type="text/css">
	<link th:href="@{/layui/autocomplete/autocomplete.css}" rel="stylesheet" type="text/css">
</head>
<style type="text/css">
	.layui-div-search {
		display: inline-block;
		position: relative;
	}
	
	.layui-input-search {
		width: 400px;
		padding: 8px 20px;
		border-radius: 20px;
		box-shadow: none;
		background: #fff;
		border: 1px solid #1E9EFF;
		outline: none;
		font-size: 16px;
	}
	
	.layui-icon-search {
		position: relative;
		right: -400px;
		top: -30px;
		font-size: 23px;
		color: #1E9FFF;
	}
	
	.layui-breadcrumb a.selected {
		color: green;
	}
	
	.summary-card:hover {
		background-color: #e1f0f3;
	}
</style>
<body class="layui-layout-body" style="min-width: 1000px;overflow-x: auto;overflow-y: auto;background: #f1f1f1">
<div class="layui-layout layui-layout-admin">
	<div class="layui-header layui-bg-blue" style="position: fixed;width: 100%;">
		<div class="layui-col-md3" style="padding-left: 15px;padding-top: 15px">
			<img th:src="@{/themes/images/logo.png}">
		</div>
	</div>
	<div id="layui-body" data-anim="layui-anim-upbit" style="width: 75%;min-width: 1000px;margin:0 auto;padding-top: 65px;">
		<div style="width: 100%;height:60px;background-color: white;padding-top: 15px;">
			<div class="layui-col-md6" style="padding-left: 15px;">
				<div class="layui-div-search">
					<input placeholder="请输入小区名称或小区地址进行检索" class="layui-input-search" id="auto-regions" name="auto-regions">
					<i class="layui-icon layui-icon-search"></i>
				</div>
			</div>
			<div class="layui-col-md6" style="padding-right: 15px;">
				<button type="button" class="layui-btn layui-btn-lg layui-btn-normal layui-btn-maps" style="float:right;">
					<i class="layui-icon layui-icon-location layui-btn-maps" style="color: #ff0813;"></i>地图导航
				</button>
			</div>
		</div>
		<div class="layui-form-search" style="margin-top: 10px;background-color: white;">
			<blockquote class="layui-elem-quote layui-quote-nm">
				区域范围：
				<span class="layui-breadcrumb" lay-separator="|">
					<a href="" class="selected">不限</a>
					<a href="">松山区</a>
					<a href="">洪山区</a>
					<a href="">元宝山区</a>
				</span>
			</blockquote>
			<blockquote class="layui-elem-quote layui-quote-nm">
				备案均价：
				<span class="layui-breadcrumb" lay-separator="|">
					<a href="" class="selected">不限</a>
					<a href="">3千以下</a>
					<a href="">3-5千</a>
					<a href="">5-8千</a>
					<a href="">8-10千</a>
					<a href="">1万以上</a>
				</span>
			</blockquote>
			<blockquote class="layui-elem-quote layui-quote-nm">
				房屋户型：
				<span class="layui-breadcrumb" lay-separator="|">
					<a href="" class="selected">不限</a>
					<a href="">一室</a>
					<a href="">二室</a>
					<a href="">三室</a>
					<a href="">四室及以上</a>
				</span>
			</blockquote>
		</div>
		<div id="regionCardContainer"></div>
	</div>
</div>
<script id="regionCardScript" type="text/html">
	<blockquote class="layui-elem-quote layui-quote-nm" style="background-color: #e1f0f3">
		小区列表：共为您筛选出<label style="color: red">{{d.length}}</label>个小区
	</blockquote>
	{{#  layui.each(d, function(index, item){ }}
	<div class="layui-card summary-card" data-value="{{=item.regionId}}" style="cursor: pointer;">
		<div class="layui-card-header">
			<div style="float: left;">
				<label style="color: green;font-weight:bold;font-size: large">{{item.regionName}}</label>
			</div>
			<div style="float: right">
				<button type="button" class="layui-btn layui-btn-primary summary-btn" value="{{=item.regionId }}">查看详情</button>
			</div>
		</div>
		<div class="layui-card-body" style="overflow: hidden">
			<div class="layui-col-md9" style="float: left">
				<div class="layui-col-md3" style="float: left">
					<img th:src="@{/themes/test/images/title/title01.png}" style="width: 200px;height: 120px">
				</div>
				<div class="layui-col-md9" style="padding-left: 30px">
					<p class="layui-elem-quote">小区地址：<label>{{item.address}}</label></p>
					<p class="layui-elem-quote">预售许可日期：<label>{{item.preSaleDate}}</label></p>
				</div>
			</div>
			<div class="layui-col-md3" style="text-align: right;padding-top: 50px">
				备案均价：<label style="color: red;font-size: x-large">{{item.avgPrice}}元/㎡</label>
			</div>
		</div>
	</div>
	{{#  }); }}
</script>
<script th:src="@{/layui/layui.js}"></script>
<script th:inline="javascript">
	var ctxPath = /*[[@{/}]]*/'';
	layui.config({
		base: ctxPath + 'layui/autocomplete/'
	}).extend({ //设定模块别名
		autocomplete: 'autocomplete'
	});
	layui.use(['carousel', 'element', 'layer', 'autocomplete', 'laytpl'], function () {
		var $ = layui.jquery;
		var autocomplete = layui.autocomplete;

		// auto 快速定位，过滤小区
		autocomplete.render({
			elem: $('#auto-regions')[0],
			url: ctxPath + 'auto-regions',
			template_val: '{{d.regionName}}',
			template_txt: '{{d.regionName}} <span class=\'layui-badge layui-bg-gray\'>{{d.address}}</span>',
			onselect: function (resp) {
				// 跳转到选择的项目详情页面
				window.location.href = ctxPath + 'content/' + resp.regionId;
			}
		});

		var laytpl = layui.laytpl;
		var regions = [[${regions}]];
		var getTpl = document.getElementById("regionCardScript").innerHTML
			, view = document.getElementById('regionCardContainer');
		laytpl(getTpl).render(regions, function (html) {
			view.innerHTML = html;
		});

		// 跳转到地图刷新页面
		$(".layui-btn-maps").on("click", function () {
			window.open(ctxPath + 'maps', '_blank');
		});

		// 跳转到小区详情页面
		$(".summary-btn").on("click", function () {
			window.open(ctxPath + 'content/' + $(this).val(), '_blank');
		});
		
		$(".summary-card").on("click", function () {
			window.open(ctxPath + 'content/' + $(this).attr("data-value"), '_blank');
		});
	});
</script>
</body>
</html>