<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>赤峰市房产信息网</title>
	<link rel="icon" type="image/x-icon" th:href="@{/favicon.ico}"/>
	<link th:href="@{/layui/css/layui.css}" rel="stylesheet" type="text/css">
	<link th:href="@{/layui/autocomplete/autocomplete.css}" rel="stylesheet" type="text/css">
</head>
<style type="text/css">
	.layui-div-search {
		display: inline-block;
		position: relative;
	}
	
	.layui-input-search {
		width: 400px;
		padding: 8px 20px;
		border-radius: 20px;
		box-shadow: none;
		background: #fff;
		border: 1px solid #1E9EFF;
		outline: none;
		font-size: 16px;
	}
	
	.layui-icon-search {
		position: relative;
		left: -34px;
		top: 4px;
		font-size: 23px;
		color: #1E9FFF;
	}
</style>
<body class="layui-layout-body" style="min-width: 1000px;overflow-x: auto;overflow-y: auto;background: #f1f1f1">
<div class="layui-layout layui-layout-admin">
	<div class="layui-header layui-bg-blue" style="position: fixed;width: 100%;">
		<div class="layui-col-md3" style="padding-left: 15px;padding-top: 15px">
			<img th:src="@{/themes/images/logo.png}">
		</div>
	</div>
	<div id="layui-body" data-anim="layui-anim-upbit" style="width: 1000px;margin:0 auto;padding-top: 65px;">
		<div style="width: 100%;height:60px;background-color: white;padding-top: 15px;">
			<div class="layui-col-md9" style="padding-left: 15px;">
				<div class="layui-div-search">
					<input placeholder="请输入小区名称或小区地址进行检索" class="layui-input-search">
					<i class="layui-icon layui-icon-search"></i>
				</div>
			</div>
			<div class="layui-col-md3" style="padding-left: 15px;">
				<button type="button" class="layui-btn layui-btn-lg layui-btn-normal layui-btn-maps">
					<i class="layui-icon layui-icon-location layui-btn-maps" style="color: #ff0813;"></i>地图找房
				</button>
			</div>
		</div>
		<div class="layui-form-search" style="padding-top: 10px">
		
		</div>
		<div id="regionCardContainer"></div>
	</div>
</div>
<script id="regionCardScript" type="text/html">
	<blockquote class="layui-elem-quote layui-quote-nm">
		小区列表：共为您筛选出<label style="color: red">{{d.length}}</label>个小区
	</blockquote>
	{{#  layui.each(d, function(index, item){ }}
	<div class="layui-card">
		<div class="layui-card-header">
			<div style="float: left;">
				<label style="color: green;font-weight:bold;font-size: large">{{item.regionName}}</label>
			</div>
			<div style="float: right">
				<button type="button" class="layui-btn layui-btn-primary summary-btn" value="{{=item.regionId }}">查看详情</button>
			</div>
		</div>
		<div class="layui-card-body">
			<img src="https://pic4.ajkimg.com/display/xinfang/665944b5b39a56537506838714c4e8b4/129x115n.jpg">
			小区地址：<label>{{item.address}}</label>
		</div>
	</div>
	{{#  }); }}
</script>
<script th:src="@{/layui/layui.js}"></script>
<script th:inline="javascript">
	var ctxPath = /*[[@{/}]]*/'';
	layui.config({
		base: ctxPath + 'layui/autocomplete/'
	}).extend({ //设定模块别名
		autocomplete: 'autocomplete'
	});
	layui.use(['carousel', 'element', 'layer', 'autocomplete', 'laytpl'], function () {
		var $ = layui.jquery;
		var autocomplete = layui.autocomplete;

		// auto 快速定位，过滤小区
		autocomplete.render({
			elem: $('#auto-regions')[0],
			url: ctxPath + 'auto-regions',
			template_val: '{{d.regionName}}',
			template_txt: '{{d.regionName}} <span class=\'layui-badge layui-bg-gray\'>{{d.address}}</span>',
			onselect: function (resp) {
				// 跳转到选择的项目详情页面
				window.location.href = ctxPath + 'content/' + resp.regionId;
			}
		});

		var laytpl = layui.laytpl;
		var regions = [[${regions}]];
		var getTpl = document.getElementById("regionCardScript").innerHTML
			, view = document.getElementById('regionCardContainer');
		laytpl(getTpl).render(regions, function (html) {
			view.innerHTML = html;
		});

		// 跳转到新页面
		$(".layui-btn-maps").on("click", function () {
			window.open(ctxPath + 'maps', '_blank');
		});
	});
</script>
</body>
</html>